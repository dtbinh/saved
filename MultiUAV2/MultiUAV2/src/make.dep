# This make fragment controls dependency generation for the build system.
# Feel free to change it as you like.  Currently, dependencies are
# generated by the mkdep script found in the top-level tool directory.
# The 'dep_check' target ensures that the script is executable and that a
# .depend file exists in the operating directory.  The existence of the
# .depend file is not strictly necessary because of the '-include'
# directive below that should ignore errors if it is lacking.  The shell
# test is included to be instructive.
#
# NOTES: 0. RTOP is defined in each local directory's Makefile
#        1. the commands touch, chmod, sed, awk are expected to be in
#           your path
#
# $Id: make.dep,v 2.1 2004/01/27 16:10:57 mitchejw Exp $
#=============================================================================

MKDEP = ${RTOP}/../tool/mkdep

depend dep:: dep_check
	${MKDEP} -f .depend ${DEFINES} ${INCLUDES} ${SRCS}

dep_check:
	@[ -x ${MKDEP} ] || chmod 750 ${MKDEP}
	@[ -f .depend ] || touch .depend

# '-' => ignore include if the file doesn't exist
-include .depend
